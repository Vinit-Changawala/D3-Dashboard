<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <title>Complete Dash Board</title>
  <style>
  
   
      
      div.tooltip {	
        position: absolute;			
        text-align: center;			
        width: 60px;					
        height: 45px;					
        padding: 2px;				
        font: 12px sans-serif;		
        background: lightsteelblue;	
        border: 0px;		
        border-radius: 8px;			
        pointer-events: none;			
      }
    
    
    </style>
  
</head>

<!-- Load d3.js -->
<svg width="600" height="600" font-family="sans-serif" font-size="8" text-anchor="middle" id="svg1"></svg>
<!-- <svg width="600" height="600" id="svg3" style="margin-left: 5%;"></svg> -->
<svg width="600" height="600" id="svg2";></svg>

<script src="https://d3js.org/d3.v4.js"></script>
<script src="https://cdn.jsdelivr.net/gh/holtzy/D3-graph-gallery@master/LIB/d3-scale-radial.js"></script>
<body style="background-image: url('02-light-blue-1024x768.jpg'); background-attachment:unset ; background-repeat: no-repeat; background-size: cover;">

<!-- Create a div where the graph will take place -->
<div id="my_dataviz" width="50%")></div>
<button onclick="update('total_rapes')" id="my_button">Total Rapes</button>
  <button onclick="update('total_assaults')">Total Assaults</button>
  <button onclick="update('total_murders')">Total Murders</button>
<div id="my_dataviz2" width="50%"></div>
<div id="my_dataviz3"></div>
<div id="my_dataviz4"></div>
<script>
// For Stacked bar graph
  // set the dimensions and margins of the graph
  
  var margin = {top: 100, right: 0, bottom: 100, left: 50},
      width = 1500 - margin.left - margin.right,
      legendh =300,
      padding=400,
      height = 1000- margin.top - margin.bottom;
  
  // append the svg object to the body of the page
  var svgs = d3.select("#my_dataviz")
    .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .attr("overflow","visible")
    .append("g")
      .attr("transform",
            "translate(" + margin.left + "," + margin.top + ")");  
      svgs.append("text")
        .attr("x", 350)   
        .attr("y",-50 )
        .attr("dy", "0em" )
        .attr("text-anchor", "start")  
        .style("font-size", "28px")  
        .style("font-weight", "bold")
        .text("Comparison of cases per crime per year ")
  
  // Parse the Data
  d3.csv("year_wise_distribution.csv", function(data) {
  
    // List of subgroups = header of the csv files = soil condition here
    var subgroups = data.columns.slice(1)
  
    // List of groups = species here = value of the first column called group -> I show them on the X axis
    var groups = d3.map(data, function(d){return(d.group)}).keys()
  
    // Add X axis
    var x = d3.scaleBand()
        .domain(groups)
        .range([0, width])
        .padding([0.2])
    svgs.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x).tickSizeOuter(0));
  
    // Add Y axis
    var y = d3.scaleLinear()
      .domain([0, 190000])
      .range([ height, 0 ]);
    svgs.append("g")
      .call(d3.axisLeft(y));
  
    // color palette = one color per subgroup
    var color = d3.scaleOrdinal()
      .domain(subgroups)
      .range(['#6AB187','#DADADA'])
  
    //stack the data? --> stack per subgroup
    var stackedData = d3.stack()
      .keys(subgroups)
      (data)


  
    // Show the bars
    svgs.append("g")
      .selectAll("g")
      // Enter in the stack data = loop key per key = group per group
      .data(stackedData)
      .enter().append("g")
        .attr("fill", function(d,i) { return color(d.key); })
        .selectAll("rect")
        // enter a second time = loop subgroup per subgroup to add all rectangles
        .data(function(d) { return d; })
        .enter().append("rect")
          .attr("x", function(d) { return x(d.data.group); })
          .attr("y", function(d) { return y(d[1]); })
          .attr("height", function(d) { return y(d[0]) - y(d[1]); })
          .attr("width",x.bandwidth())
          .on("mouseover", function() { tooltip2.style("display", null); })
          .on("mouseout", function() { tooltip2.style("display", "none"); })
          .on("mousemove", function(d) {
      console.log(d);
      var xPosition = d3.mouse(this)[0]-700 ;
      var yPosition = d3.mouse(this)[1] ;
      tooltip2.attr("transform", "translate(" + xPosition + "," + yPosition + ")");
      tooltip2.select("text").text(d[1]-d[0]);
    });
    var tooltip2 = svg.append("g")
    .attr("class", "tooltip")
    .style("display", "none");
      
  tooltip2.append("rect")
    .attr("width", 60)
    .attr("height", 20)
    .attr("fill", "lightsteelblue")
    .style("opacity", 0.5);

  tooltip2.append("text")
    .attr("x", 30)
    .attr("dy", "1.2em")
    .style("text-anchor", "middle")
    .attr("font-size", "12px")
    .attr("font-weight", "bold");

          
    var legends = svgs.append('g')
        .attr('class', 'legend')
        .attr('transform', 'translate(' + padding + ','+ (height -legendh)  + ')');

    legends.selectAll('rect')
        .data(stackedData)
        .enter()
        .append('rect')
        .attr('x', -50)
        .attr('y', function(d,i){
            return i * 18;
        })
        .attr('width', 16)
        .attr('height', 16)
        .attr('fill', function(d,i){return color(d.key);
        });

        legends.selectAll('text')
        .data(stackedData)
        .enter()
        .append('text')
        .text(function(d){
            return d.key;
        })
        .attr('x', -30)
        .attr('y', function(d, i){
            return i * 18;
        })
        // .attr("dy", "1em")
        .attr("font-size", "17px") 
        .attr('text-anchor', 'start')
        .attr('alignment-baseline', 'hanging');
  })
  
  </script>
  <!-- For Bubble chart -->
  <script>

    var svgb = d3.select("#svg1"),
        width = svgb.attr("width"),
        height = svgb.attr("height");
    var g = svgb.append("g")
            .attr("transform", "translate(" + width / 2+ "," + height/2 + ")")
            .attr("overflow","hidden");
    
      // Define the div for the tooltip
    var div = d3.select("body").append("div")	
        .attr("class", "tooltip")				
        .style("opacity", 0);
    
      
      svgb.append("text")
        .attr("x", 120)   
        .attr("y", -50 )
        .attr("dy", "3.5em" )
        .attr("text-anchor", "start")  
        .style("font-size", "22px")  
        .style("font-weight", "bold")
        .text("State wise total crimes in 2015 ")
    
    var pack = d3.pack()
        .size([width-140, height-40
        ])
        .padding(2.5);
    
    d3.csv("state_crimes.csv", function(d) {
      d.value = +d["Total_crimes_2015"];
      d.Call_Type = d["States"]
    
       return d;
    }, function(error, data) {
      if (error) throw error;
    
      
     
      var color = d3.scaleOrdinal()
      .domain(data.map(function(d){ return d.Call_Type;}))
      .range(['#fe4a49','#2ab7ca', ' #fed766', ' #fe8a71' ,' #f4b6c2 ']);
      
      var root = d3.hierarchy({children: data})
          .sum(function(d) { return d.value; })
    
      var node = svgb.selectAll(".node")
        .data(pack(root).leaves())
        .enter().append("g")
          .attr("class", "node")
          .attr("transform", function(d) { return "translate(" + d.x+ "," + d.y + ")"; });
     
      
      node.append("circle")
          .attr("id", function(d) { return d.id; })
          .attr("r", function(d) { return d.r; })
          .style("fill", function(d) { return color(d.data.Call_Type); })
          .on("mouseover", function(d) {		
        div.transition()		
          .duration(200)		
          .style("opacity", .9);	
        
          var duration = 300;
      data.forEach(function(d, i) {
        // console.log(d.value);
        node.transition().duration(duration).delay(i * duration)
            .attr("r", d.value);
    });
         
        
        div.html(d.data.Call_Type + ": <br>"+d.data.value  )	
          .style("left", (d3.event.pageX) + "px")		
          .style("top", (d3.event.pageY - 28) + "px");	
      })					
        .on("mouseout", function(d) {		
        div.transition()		
          .duration(500)		
          .style("opacity", 0);	
      });
    
      
      
       node.append("text")
          .text(function(d) {
         if (d.data.value > 2000){
           return d.data.Call_Type;
         }
         return "";}).style("font-size", "10px").style("font-weight", "bold");
      
      
    
      var legend = svgb.selectAll(".legend")
      .data(data).enter()
      .append("g")
      .attr("class","legend")
      .attr("transform", "translate(" + 450 + "," + 60+ ")");
         
     
       legend.append("rect")
         .attr("x", 0) 
         .attr("y", function(d, i) { return 18.5 * i; })
         .attr("width", 15)
         .attr("height", 15)
        .style("fill", function(d) { return color(d.Call_Type)});
       
    
        legend.append("text")
         .attr("x", 20) 
          .attr("text-anchor", "start")
         .attr("dy", "1em") 
         .attr("y", function(d, i) { return 18.5 * i; })
         .text(function(d) {return d.Call_Type;})
        .attr("font-size", "12px"); 
      
          
        legend.append("text")
         .attr("x",20) 
         .attr("dy", "-.2em")
         .attr("y",-5)
         .text("States")
        .attr("font-size", "17px"); 
    
      
      
    });
    </script>
    <!-- For Donut -->
      <script>
          
          var svgm = d3.select("#svg2"),
              width = svgm.attr("width"),
              height = svgm.attr("height"),
              radius = (Math.min(width, height) / 2)-50;
          var div = d3.select("body").append("div")	
             .attr("class", "tooltip")				
             .style("opacity", 0);

          var g = svgm.append("g")
              .attr("transform", "translate(" + (width / 2) + "," + (height/2-10 ) + ")")
              // .attr("overflow","visible");

          var color = d3.scaleOrdinal(['#EA6A47', '#1C4E80','#A5D8DD']);

          var pie = d3.pie().value(function (d) {
              return d.total_cases;
          });

          var path = d3.arc()
              .outerRadius(radius - 10)
              .innerRadius(80);

          var label = d3.arc()
              .outerRadius(radius)
              .innerRadius(radius - 80);
              var pack2 = d3.pack()
  .size([width-150, height])
  .padding(1.5);

          d3.csv("crimes_contribution.csv", function (error, data) {
              if (error) {
                  throw error;
              }
              var root2 = d3.hierarchy({children: data})
    .sum(function(d) { return d.value; })

var node = svgm.selectAll(".node")
  .data(pack2(root2).leaves())
  .enter().append("g")
    .attr("class", "node")
    .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
              var arc = g.selectAll(".arc")
                  .data(pie(data))
                  .enter().append("g")
                  .attr("class", "arc");

              arc.append("path")
                  .attr("d", path)
                  .attr("fill", function (d) { return color(d.data.crime); })
                  .on("mouseover", function(d) {		
             div.transition()		
              .duration(200)		
              .style("opacity", .9);
             var duration = 300;
              data.forEach(function(d, i) {
              node.transition().duration(duration).delay(i * duration)
              .attr("r", d.value);
});	
              div.html(d.data.crime + ": <br>"+d.data.total_cases)	
              .style("left", (d3.event.pageX) + "px")		
              .style("top", (d3.event.pageY - 28) + "px");	
})					
              .on("mouseout", function(d) {		
              div.transition()		
              .duration(500)		
              .style("opacity", 0);	
});
node.append("text")
    .text(function(d) {
   return d.data.total_cases;});

              // arc.append("text")
              //     .attr("transform", function (d) {
              //         return "translate(" + label.centroid(d) + ")";
              //     })
              //     .text(function (d) { return d.data.crime; });

              svgm.append("text")
        .attr("x",150 )   
        .attr("y", -50 )
        .attr("dy", "3.5em" )
        .attr("dx","3.5")
        .attr("text-anchor", "start")  
        .style("font-size", "24px")  
        .style("font-weight", "bold")
        .text("Contribution of crimes in total cases ")
              var legend = svgm.selectAll(".legend")
              .data(data).enter()
              .append("g")
              .attr("class","legend")
              .attr("transform", "translate(" + 270 + "," + 260+ ")");
   

              legend.append("rect")
              .attr("x", 0) 
              .attr("y", function(d, i) { return 20 * i; })
              .attr("width", 15)
              .attr("height", 15)
          .style("fill", function(d) { return color(d.crime)});
 

              legend.append("text")
              .attr("x", 25) 
            .attr("text-anchor", "start")
              .attr("dy", "1em") 
              .attr("y", function(d, i) { return 20 * i; })
              .text(function(d) {return d.crime;})
              .attr("font-size", "12px"); 


              legend.append("text")
              .attr("x",20) 
              .attr("dy", "-.2em")
              .attr("y",0)
              .text("Crimes")
              .attr("font-size", "17px"); 


});  

      </script>
  <!-- For Multibar -->
  <script>

    // set the dimensions and margins of the graph
    var margin2 = {top1: -900, right1: 100, bottom1: 500, left1: 800},
        width1 = 460 - margin2.left1 - margin2.right1,
        // padding=20,
        // legendh=380,
        height1 = 100- margin2.top1 - margin2.bottom1;
    
    // append the svg object to the body of the page
    var svg = d3.select("#my_dataviz2")
      .append("svg")
        .attr("width", width1 + margin2.left1 + margin2.right1)
        .attr("height", height1 + margin2.top1 + margin2.bottom1)
        .attr("overflow","visible")
      .append("g")
        .attr("transform",
              "translate(" + margin2.left1 + "," + margin2.top1 + ")");
        
    
    // Parse the Data
    d3.csv("crime_wise_distribution.csv", function(data) {
    
      // List of subgroups = header of the csv files = soil condition here
      var subgroups = data.columns.slice(1)
    
      // List of groups = species here = value of the first column called group -> I show them on the X axis
      var groups = d3.map(data, function(d){return(d.Year)}).keys()
    
      // Add X axis
      var x = d3.scaleBand()
          .domain(groups)
          .range([0, width])
          .padding([0.2])
      svg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x).tickSize(5));

    
    
      // Add Y axis
      var y = d3.scaleLinear()
        .domain([0, 90000])
        .range([ height, 0 ]);
      svg.append("g")
        .call(d3.axisLeft(y));
    
      // Another scale for subgroup position?
      var xSubgroup = d3.scaleBand()
        .domain(subgroups)
        .range([0, x.bandwidth()])
        .padding([0.05])
    
      // color palette = one color per subgroup
      var color = d3.scaleOrdinal()
        .domain(subgroups)
        .range(['#1C4E80','#0091D5','#A5D8DD'])
    
      // Show the bars
      svg.append("g")
        .selectAll("g")
        // Enter in data = loop group per group
        .data(data)
        .enter()
        .append("g")
          .attr("transform", function(d) { return "translate(" + x(d.Year) + ",0)"; })
        .selectAll("rect")
        .data(function(d) { return subgroups.map(function(key) { return {key: key, value: d[key]}; }); })
        .enter().append("rect")
          .attr("x", function(d) { return xSubgroup(d.key); })
          .attr("y", function(d) { return y(d.value); })
          .attr("width", xSubgroup.bandwidth())
          .attr("height", function(d) { return height - y(d.value); })
          .attr("fill", function(d,i) { return color(d.key); })
          .on("mouseover", function() { tooltip3.style("display", null); })
          .on("mouseout", function() { tooltip3.style("display", "none"); })
          .on("mousemove", function(d) {
      console.log(d);
      var xPosition = d3.mouse(this)[0]-30 ;
      var yPosition = d3.mouse(this)[1] ;
      tooltip3.attr("transform", "translate(" + xPosition + "," + yPosition + ")");
      tooltip3.select("text").text(d.key+":"+d.value);
    });
    var tooltip3 = svg.append("g")
    .attr("class", "tooltip")
    .style("display", "none");
      
  tooltip3.append("rect")
    .attr("width", 60)
    .attr("height", 20)
    .attr("fill", "lightsteelblue")
    .style("opacity", 0.5);

  tooltip3.append("text")
    .attr("x", 30)
    .attr("dy", "1.2em")
    .style("text-anchor", "middle")
    .attr("font-size", "10px")
    .attr("font-weight", "bold");

  var legendm = svgs.append('g')
        .attr('class', 'legend')
        .attr('transform', 'translate(' + padding + ','+ (height -legendh)  + ')');

    legendm.selectAll('rect')
        .data(subgroups)
        .enter()
        .append('rect')
        .attr('x', 700)
        .attr('y', function(d,i){
            return i * 18;
        })
        .attr('width', 16)
        .attr('height', 16)
        .attr('fill', function(d,i){return color(d);
        });

        legendm.selectAll('text')
        .data(subgroups)
        .enter()
        .append('text')
        .text(function(d){
            return d;
        })
        .attr('x', 720)
        .attr('y', function(d, i){
            return i * 18;
        })
        // .attr("dy", "1em")
        .attr("font-size", "19px") 
        .attr('text-anchor', 'start')
        .attr('alignment-baseline', 'hanging');
      })
          </script>

    <!-- For Circular bar plot -->
    <script>
      var margin3 = {top3: -20, right3:10, bottom3: 700, left3: 24},
          width3 = 460 - margin3.left3 - margin3.right3,
          padding2=170
          legendh2=-50
          height3 = 430 - margin3.top3 - margin3.bottom3,
          innerRadius = 90,
          outerRadius = Math.min(width3, height3) / 2;   // the outerRadius goes from the middle of the SVG area to the border
      
      // append the svg object
      var svgc = d3.select("#my_dataviz3")
        .append("svg")
          .attr("width", width3 + margin3.left3 + margin3.right3)
          .attr("height", height3 + margin3.top3 + margin3.bottom3)
          .attr("overflow","visible")
        .append("g")
          .attr("transform", "translate(" + (width3 / 2 + margin3.left3+720) + "," + (height3 / 2 + margin3.top3-230) + ")");
          svgc.append("text")
              .attr("x", -240)   
              .attr("y",-215 )
              .attr("dy", "0em" )
              .attr("text-anchor", "start")  
              .style("font-size", "22px")  
              .style("font-weight", "bold")
              .text("Comparison of various states & Union Territories")
      
      d3.csv("state_ut_crimes.csv", function(data) {
      
        // X scale: common for 2 data series
        var x = d3.scaleBand()
            .range([0, 2 * Math.PI])    // X axis goes from 0 to 2pi = all around the circle. If I stop at 1Pi, it will be around a half circle
            .align(0)                  // This does nothing
            .domain(data.map(function(d) { return d.States; })); // The domain of the X axis is the list of states.
      
        // Y scale outer variable
        var y = d3.scaleRadial()
            .range([innerRadius, outerRadius])   // Domain will be define later.
            .domain([0, 13000]); // Domain of Y is from 0 to the max seen in the data
      
        // Second barplot Scales
        var ybis = d3.scaleRadial()
            .range([innerRadius, 5])   // Domain will be defined later.
            .domain([0, 13000]);
      // Add the bars
      svgc.append("g")
          .selectAll("path")
          .data(data)
          .enter()
          .append("path")
            .attr("fill", "#69b3a2")
            .attr("class", "yo")
            .attr("d", d3.arc()     // imagine your doing a part of a donut plot
                .innerRadius(innerRadius)
                .outerRadius(function(d) { return y(d['total_cases']); })
                .startAngle(function(d) { return x(d.States); })
                .endAngle(function(d) { return x(d.States) + x.bandwidth(); })
                .padAngle(0.01)
                .padRadius(innerRadius))
                .on("mouseover", function() { tooltip3.style("display", null); })
                .on("mouseout", function() { tooltip3.style("display", "none"); })
                .on("mousemove", function(d) {
            console.log(d.total_cases);
            var xPosition = d3.mouse(this)[0]+30;
            var yPosition = d3.mouse(this)[1] ;
            tooltip3.attr("transform", "translate(" + xPosition + "," + yPosition + ")");
            tooltip3.select("text").text(d.States+":"+d.total_cases);
          });
          var tooltip3 = svgc.append("g")
          .attr("class", "tooltip")
          .style("display", "none");
            
        tooltip3.append("rect")
          .attr("width", 100)
          .attr("height", 20)
          .attr("fill", "lightsteelblue")
          .style("opacity", 0.5);
      
        tooltip3.append("text")
          .attr("x", 50)
          .attr("dy", "1.2em")
          .style("text-anchor", "middle")
          .attr("font-size", "12px")
          .attr("font-weight", "bold");
      
        // Add the labels
        svgc.append("g")
            .selectAll("g")
            .data(data)
            .enter()
            .append("g")
              .attr("text-anchor", function(d) { return (x(d.States) + x.bandwidth() / 2 + Math.PI) % (2 * Math.PI) < Math.PI ? "end" : "start"; })
              .attr("transform", function(d) { return "rotate(" + ((x(d.States) + x.bandwidth() / 2) * 180 / Math.PI - 90) + ")"+"translate(" + (y(d['total_cases'])+10) + ",0)"; })
            .append("text")
              .text(function(d){return(d.States)})
              .attr("transform", function(d) { return (x(d.States) + x.bandwidth() / 2 + Math.PI) % (2 * Math.PI) < Math.PI ? "rotate(180)" : "rotate(0)"; })
              .style("font-size", "11px")
              .attr("alignment-baseline", "middle")
      
        // Add the second series
        svgc.append("g")
          .selectAll("path")
          .data(data)
          .enter()
          .append("path")
            .attr("fill", "red")
            .attr("d", d3.arc()     // imagine your doing a part of a donut plot
                .innerRadius( function(d) { return ybis(0) })
                .outerRadius( function(d) { return ybis(d['total_assaults']); })
                .startAngle(function(d) { return x(d.States); })
                .endAngle(function(d) { return x(d.States) + x.bandwidth(); })
                .padAngle(0.01)
                .padRadius(innerRadius))
                .on("mouseover", function() { tooltip4.style("display", null); })
                .on("mouseout", function() { tooltip4.style("display", "none"); })
                .on("mousemove", function(d) {
            console.log(d.total_assaults);
            var xPosition = d3.mouse(this)[0]+30;
            var yPosition = d3.mouse(this)[1] ;
            tooltip4.attr("transform", "translate(" + xPosition + "," + yPosition + ")");
            tooltip4.select("text").text(d.States+":"+d.total_assaults);
          });
          var tooltip4 = svgc.append("g")
          .attr("class", "tooltip")
          .style("display", "none");
            
        tooltip4.append("rect")
          .attr("width", 100)
          .attr("height", 20)
          .attr("fill", "lightsteelblue")
          .style("opacity", 0.5);
      
        tooltip4.append("text")
          .attr("x", 50)
          .attr("dy", "1.2em")
          .style("text-anchor", "middle")
          .attr("font-size", "12px")
          .attr("font-weight", "bold");
          
          var subgroup=data.columns.slice(1)
          var color = d3.scaleOrdinal()
              .domain(subgroup)
              .range(['red','#69b3a2'])
      
          var legendc = svgc.append('g')
              .attr('class', 'legend')
              .attr('transform', 'translate(' + padding2 + ','+ (height3 -legendh2)  + ')');
      
          legendc.selectAll('rect')
              .data(subgroup)
              .enter()
              .append('rect')
              .attr('x', -50)
              .attr('y', function(d,i){
                  return i * 18;
              })
              .attr('width', 16)
              .attr('height', 16)
              .attr('fill', function(d,i){return color(d)});
      
              legendc.selectAll('text')
              .data(subgroup)
              .enter()
              .append('text')
              .text(function(d){
                  return d;
              })
              .attr('x', -30)
              .attr('y', function(d, i){
                  return i * 18;
              })
              // .attr("dy", "1em")
              .attr("font-size", "16px") 
              .attr('text-anchor', 'start')
              .attr('alignment-baseline', 'hanging');
      
      });
      </script>

  <!-- For lolipop chart -->
  
  <!-- Add 3 buttons -->
  
  <!-- Create a div where the graph will take place -->
  
  <script>

    
  
      // set the dimensions and margins of the graph
      var margin = {top: 30, right: 30, bottom: 50, left: 30},
          width = 460 - margin.left - margin.right,
          height = 400 - margin.top - margin.bottom;
      
      // append the svg object to the body of the page
      var svgl = d3.select("#my_dataviz4")
        .append("svg")
          .attr("width", width + margin.left + margin.right)
          .attr("height", height + margin.top + margin.bottom)
          .attr("overflow","visible")
        .append("g")
          .attr("transform",
                "translate(" + margin.left + "," + (margin.top-1030) + ")");
                
          
      
      // Initialize the X axis
      var x = d3.scaleBand()
        .range([ 0, width ])
        .padding(1);
        
      var xAxis = svgl.append("g")
        .attr("transform", "translate(0," + height + ")");
      
      
      // Initialize the Y axis
      var y = d3.scaleLinear()
        .range([ height, 0]);
      var yAxis = svgl.append("g")
        .attr("class", "myYaxis")
  
        var t= svgl.append("text")
      
      
      // A function that create / update the plot for a given variable:
      function update(selectedVar) {
      
        // Parse the Data
        d3.csv("lolipop_graph.csv", function(data) {
      
          // X axis
          x.domain(data.map(function(d) { return d.UT; }))
          xAxis.transition().duration(1000).call(d3.axisBottom(x))
          .selectAll("text")
              .style("text-anchor", "end")
              .attr("dx", "-.4em")
              .attr("dy", ".15em")
              .attr("transform", "rotate(-65)" );
      
          // Add Y axis
          y.domain([0, d3.max(data, function(d) { return +d[selectedVar]+10 }) ]);
          yAxis.transition().duration(1000).call(d3.axisLeft(y));
          t
                .transition()
                .duration(1000)
                  .attr("x", 10)   
                  .attr("y",-30 )
                  .attr("dy", "0em" )
                  .attr("text-anchor", "start")  
                  .style("font-size", "20px")  
                  .style("font-weight", "bold")
                  .text("Cases of " +selectedVar+ " in Union Territories")
      
          // variable u: map data to existing circle
          var j = svgl.selectAll(".myLine")
            .data(data)
          // update lines
          j
            .enter()
            .append("line")
            .attr("class", "myLine")
            .merge(j)
            .transition()
            .duration(1000)
              .attr("x1", function(d) { console.log(x(d.UT)) ; return x(d.UT); })
              .attr("x2", function(d) { return x(d.UT); })
              .attr("y1", y(0))
              .attr("y2", function(d) { return y(d[selectedVar]); })
              .attr("stroke", "grey")
      
      
          // variable u: map data to existing circle
          var u = svgl.selectAll("circle")
            .data(data)
          // update bars
          u
            .enter()
            .append("circle")
            .merge(u)
            .transition()
            .duration(1000)
              .attr("cx", function(d) { return x(d.UT); })
              .attr("cy", function(d) { return y(d[selectedVar]); })
              .attr("r", 8)
              .attr("fill", "#69b3a2");
              
      
      
        })
      
      }
      
      // Initialize plot
      update('total_rapes')
      
      
      </script>  
</body>